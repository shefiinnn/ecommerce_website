/* Nike -- marketing-automation.optimization-client -- 1.6.0 */
(()=>{"use strict";var e=function(e){this._locations=[],e&&(this._locations=e)},n=function(e){this._locations=[],e&&(this._locations=e)},t=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},o=function(e,n){var t,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=n.call(e,r)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},i="Experiment Activated",r=function(){return t(void 0,void 0,void 0,(function(){var e,n;return o(this,(function(t){switch(t.label){case 0:return[4,null===(n=window.webShellClient)||void 0===n?void 0:n.identity.getUserProfile()];case 1:return[2,{userId:null==(e=t.sent())?void 0:e.upmId,loggedIn:!!(null==e?void 0:e.upmId)}]}}))}))},a=function(){return a=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},a.apply(this,arguments)},l="nikecom";var c,u=function(e){var n,t,o,i,r,c,u,s,d,v;try{var p=function(e){var n,t,o,i,r,a=e.location.href,l={"/t/":"pdp","/t-dark/":"pdp","/u-dark/":"pdp","/u/":"pdp","/w/":"pw","/w-dark/":"pw","/cart":"cart","/checkout":"checkout","/member":"member","/help":"help","/w?q":"onsite search"};if(a){var c=!1;Object.keys(l).forEach((function(e){!c&&a.includes(e)&&(c=!0,r=l[e])}))}if(!r)try{r=null===(i=null===(o=null===(t=null===(n=e.__NEXT_DATA__)||void 0===n?void 0:n.props)||void 0===t?void 0:t.pageProps)||void 0===o?void 0:o.navConfig)||void 0===i?void 0:i.analyticsPageType}catch(e){}return r}(e),f=function(e,n){var t,o,i,r,a,l,c,u,s,d,v,p,f,w,h,g,y,b,m,_,A,T,I,O,P,E,N,k,C=(null===(t=e.location)||void 0===t?void 0:t.pathname)||"";switch(n){case"pdp":k=null===(o=document.querySelector("#pdp_product_title"))||void 0===o?void 0:o.innerText.toLowerCase();break;case"pw":k=null===(s=null===(u=null===(c=null===(l=null===(a=null===(r=null===(i=e.__NEXT_DATA__)||void 0===i?void 0:i.props)||void 0===r?void 0:r.pageProps)||void 0===a?void 0:a.initialState)||void 0===l?void 0:l.Wall)||void 0===c?void 0:c.facetNav)||void 0===u?void 0:u.analytics)||void 0===s?void 0:s.legacyPageName.toLowerCase();break;case"homepage":k=N=null===(f=null===(p=null===(v=null===(d=e.__NEXT_DATA__)||void 0===d?void 0:d.props)||void 0===v?void 0:v.pageProps)||void 0===p?void 0:p.navConfig)||void 0===f?void 0:f.pageDetail;break;case"landing page":N=null===(y=null===(g=null===(h=null===(w=e.__NEXT_DATA__)||void 0===w?void 0:w.props)||void 0===h?void 0:h.pageProps)||void 0===g?void 0:g.navConfig)||void 0===y?void 0:y.globalNavPageName,k=null===(A=null===(_=null===(m=null===(b=e.__NEXT_DATA__)||void 0===b?void 0:b.props)||void 0===m?void 0:m.pageProps)||void 0===_?void 0:_.navConfig)||void 0===A?void 0:A.pageDetail;break;case"cart":N="cart",k="view";break;case"help":N="help";var S=C.split("/");2===S.length?k="home":C.includes("/search/")?k="search":C.includes("/a/")&&(k="article>".concat(S[S.length-1]));break;case"checkout":k="shipping";break;case"onsite search":k=(null===(E=null===(P=null===(O=null===(I=null===(T=e.__NEXT_DATA__)||void 0===T?void 0:T.props)||void 0===I?void 0:I.pageProps)||void 0===O?void 0:O.initialState)||void 0===P?void 0:P.Wall)||void 0===E?void 0:E.products.length)?"results found":"no search results";break;case"member":N="member",k=["inbox","profile","settings"].find((function(e){return C.includes(e)}))}return{pageName:N,pageDetail:k}}(e,p),w=f.pageName,h=f.pageDetail,g=function(e){var n;switch(e){case"pdp":case"homepage":case"landing page":case"cart":case"checkout":n=e;break;case"pw":n="product wall"}return n}(p),y=null===(o=null===(t=null===(n=null==e?void 0:e.webShellClient)||void 0===n?void 0:n.locale)||void 0===t?void 0:t.get())||void 0===o?void 0:o.currency,b=a({domain:"www.nike.com",backendPlatform:"cloud"},(v=g)&&{name:v}),m=function(e,n,t){var o=a(a({experienceType:l},n&&{pageType:n}),t&&{pageDetail:t});return a(a({},o),"landing page"===n||"homepage"===n?e&&{pageName:"".concat(l,">").concat(e)}:t&&{pageName:"".concat(l,">").concat(n,">").concat(t)})}(w,p,h),_=function(e){return{language:(null==e?void 0:e.language)||"en",country:(null==e?void 0:e.country)||"us"}}(null===(r=null===(i=e.webShellClient)||void 0===i?void 0:i.locale)||void 0===r?void 0:r.get());return a(a({app:b,view:m},y&&{currency:y}),{language:(null===(s=null===(u=null===(c=e.webShellClient)||void 0===c?void 0:c.locale)||void 0===u?void 0:u.get())||void 0===s?void 0:s.langRegion)||"en_US",locale:_})}catch(n){return e.newrelic&&e.newrelic.addPageAction("OPTIMIZATION_CLIENT_COMMON_PROPERTIES_ERROR",{host:e.location.host,errorName:n.name,errorMessage:n.message,stackTrace:null!==(d=n.stack)&&void 0!==d?d:""}),console.error("Failed to get common properties: ".concat(n.message)),{app:{backendPlatform:"",domain:"",name:"",version:""},view:{experienceType:"",pageName:"",pageType:"",pageDetail:""},language:"",locale:{country:"",language:""},currency:""}}},s=function(){return s=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},s.apply(this,arguments)};!function(e){e[e.CONTINUE=0]="CONTINUE",e[e.STOP=1]="STOP"}(c||(c={}));var d,v=function(){function e(){this.maxAttempts=10,this.interval=50,this.exponentRate=1.5}return e.run=function(e){var n=function(t){if(void 0===t&&(t=0),function(n){try{return e.onTick(n)}catch(n){return e.onError(n),c.STOP}}(t)!==c.STOP)if(t+1>=e.maxAttempts)e.onTimeout();else{var o=e.interval*Math.pow(t+1,e.exponentRate);setTimeout((function(){return n(t+1)}),o)}};return n(),e},e.runAsync=function(n){return new Promise((function(t,o){e.run(s(s({},new e),{onTick:function(){var e=n();return e?(t(e),c.STOP):c.CONTINUE},onError:o,onTimeout:function(){return t(null)}}))}))},e}(),p=(d=function(e,n){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},d(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}d(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),f=function(){return f=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},f.apply(this,arguments)},w=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},h=function(e,n){var t,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=n.call(e,r)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},g=function(e,n,t){if(t||2===arguments.length)for(var o,i=0,r=n.length;i<r;i++)!o&&i in n||(o||(o=Array.prototype.slice.call(n,0,i)),o[i]=n[i]);return e.concat(o||Array.prototype.slice.call(n))},y="adtargeting_behavioralevents",b="performance",m=function(e){function n(n){var t,o=e.call(this,n)||this;return o.getLocations=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return w(o,g([e],n,!0),void 0,(function(e,n){var t,o,i,a,l,c,u,s,d,v,p,f,w,g,m,_,A;return void 0===n&&(n=!1),h(this,(function(h){switch(h.label){case 0:return t=null!==(s=null==e?void 0:e.locations)&&void 0!==s?s:this._locations,[4,this.getAdobeATSdk()];case 1:if(!(null==(o=h.sent())?void 0:o.target))return console.warn("Optimization client is unable to find Adobe Target. Please check that your application is configured correctly."),[2];if(0===t.length)return console.error("Locations must be provided either via a function argument or as a part of the Optimization configuration"),null===(d=window.newrelic)||void 0===d||d.addPageAction("EXP_OPTIMIZATION_CLIENT_NO_LOCATIONS",{errorMessage:"Locations must be provided."}),[2];I=t,(O=new URL(window.location.href).searchParams.get("atLocation"))&&(I[0].name=O),T=t,new URL(window.location.href).searchParams.forEach((function(e,n){if(n.indexOf("mbox:")>=0){var t=n.split(":")[1];T[0].parameters[t]=e}})),h.label=2;case 2:return h.trys.push([2,6,,7]),[4,r()];case 3:return i=h.sent(),a=this.getOptions(t),[4,null===(v=window.analyticsClient)||void 0===v?void 0:v.isInitialized()];case 4:return h.sent(),l=null===(f=null===(p=null===window||void 0===window?void 0:window.NikePrivacy)||void 0===p?void 0:p.permissions.get())||void 0===f?void 0:f.map((function(e){var n=e.category;return e.isEnabled?n:null})).filter(Boolean),[y,b].every((function(e){return null==l?void 0:l.includes(e)}))?(window.Visitor&&this.setCustomerIDs(i),[4,window.adobe.target.getOffers(a)]):(console.warn("Appropriate UGP permissions have not been given. Cannot fetch Adobe Target locations."),null===(w=window.newrelic)||void 0===w||w.addPageAction("EXP_OPTIMIZATION_CLIENT_NO_UGP_PERMISSION",{errorMessage:"Appropriate UGP permissions have not been given.",locations:t}),[2]);case 5:return c=h.sent(),null===(g=window.newrelic)||void 0===g||g.addPageAction("EXP_OPTIMIZATION_CLIENT_SUCCESS",{locations:t}),[2,this.transformAdobeOffersToGetLocationsResult(c,n)];case 6:return u=h.sent(),(null===(m=window.newrelic)||void 0===m?void 0:m.noticeError)&&(null===(_=window.newrelic)||void 0===_||_.addPageAction("EXP_OPTIMIZATION_CLIENT_ERROR",{host:window.location.host,errorName:u.name,errorMessage:u.message,stackTrace:null!==(A=u.stack)&&void 0!==A?A:"",locations:t.length?t:null})),console.error("Failed to find locations: ".concat(u.message)),[3,7];case 7:return[2]}var T,I,O}))}))},o.getOptions=function(e){return{request:{context:{channel:"web"},experienceCloud:{analytics:{logging:"client_side"}},property:{token:(n=new URL(window.location.href).searchParams.get("atProperty"),n||"ae0ecea9-920a-26c9-5042-3a3aab0ff68b")},execute:{mboxes:e.map((function(e,n){return{name:e.name,index:n,parameters:e.parameters}}))}}};var n},o.transformAdobeOffersToGetLocationsResult=function(e,n){for(var t,i,r,a,l,c=[],u=function(e){var u={name:e.name,analytics:null===(t=e.analytics)||void 0===t?void 0:t.payload.tnta,content:null===(r=null===(i=null==e?void 0:e.options)||void 0===i?void 0:i[0])||void 0===r?void 0:r.content,responseTokens:null===(l=null===(a=null==e?void 0:e.options)||void 0===a?void 0:a[0])||void 0===l?void 0:l.responseTokens,experimentActivatedCallback:function(){}};if(u.analytics){var s=function(){var n;try{return o.sendAdobeAnalyticsEvent(e),!0}catch(e){return window.newrelic&&window.newrelic.addPageAction("OPTIMIZATION_CLIENT_ANALTICS_SEND_ERROR",{host:window.location.host,errorName:e.name,errorMessage:e.message,stackTrace:null!==(n=e.stack)&&void 0!==n?n:""}),console.error("Failed to send Analytics: ".concat(e.message)),!1}finally{u.experimentActivatedCallback=function(){}}};n?u.experimentActivatedCallback=s:s()}c.push(u)},s=0,d=e.execute.mboxes;s<d.length;s++){u(d[s])}if(c&&c.length>0)return{locations:c}},null===(t=window.newrelic)||void 0===t||t.addPageAction("EXP_OPTIMIZATION_CLIENT_INITIALIZED",{}),o}return p(n,e),n.prototype.setCustomerIDs=function(e){var n=window.Visitor.getInstance("F0935E09512D2C270A490D4D@AdobeOrg");n.setCustomerIDs({customerecid:{id:n.getMarketingCloudVisitorID(),authState:e.loggedIn?window.Visitor.AuthState.AUTHENTICATED:window.Visitor.AuthState.UNKNOWN}})},n.prototype.validExperiment=function(e){return void 0!==e.content},n.prototype.sendAdobeAnalyticsEvent=function(e){var n,t,o,r,a,l=u(window);window.webShellClient.analytics.track(i,f({"experience.name":null===(t=null===(n=null==e?void 0:e.options)||void 0===n?void 0:n[0])||void 0===t?void 0:t.responseTokens["experience.name"],"activity.name":null===(r=null===(o=null==e?void 0:e.options)||void 0===o?void 0:o[0])||void 0===r?void 0:r.responseTokens["activity.name"],abTest:{analytics:null===(a=null==e?void 0:e.analytics)||void 0===a?void 0:a.payload.tnta}},l),{writeKey:"2iv4Qa7rFEipAs4iE850BkBpTYQvlAFZ"})},n.prototype.getAdobeATSdk=function(){return w(this,void 0,void 0,(function(){return h(this,(function(e){return[2,v.runAsync((function(){return window.adobe}))]}))}))},n}(e),_=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),A=function(){return A=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},A.apply(this,arguments)},T=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},I=function(e,n){var t,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=n.call(e,r)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},O=function(e,n,t){if(t||2===arguments.length)for(var o,i=0,r=n.length;i<r;i++)!o&&i in n||(o||(o=Array.prototype.slice.call(n,0,i)),o[i]=n[i]);return e.concat(o||Array.prototype.slice.call(n))},P="adtargeting_behavioralevents",E="performance",N=function(e){function n(n){var t,o=e.call(this,n)||this;return o.getAlloyLocations=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return T(o,O([e],n,!0),void 0,(function(e,n){var t,o,i,r,a,l,c,u,s,d,v,p,f,w,h,g,y,b,m,_,A,T,O,N;return void 0===n&&(n=!1),I(this,(function(I){switch(I.label){case 0:return[4,this.getAdobeAlloySdk(window.alloy)];case 1:if(!I.sent())return console.warn("Optimization client is unable to find Adobe Web SDK(AlloyJS). Please check that your application is configured correctly."),[2];if(0===(t=null!==(d=null==e?void 0:e.locations)&&void 0!==d?d:this._locations).length)return console.error("Location must be provided to fetch activity details via Adobe Web SDK(AlloyJS)."),null===(v=window.newrelic)||void 0===v||v.addPageAction("EXP_OPTIMIZATION_CLIENT_ALLOY_NO_LOCATIONS",{errorMessage:"Location must be provided to fetch activity details via Adobe Web SDK(AlloyJS)."}),[2];I.label=2;case 2:return I.trys.push([2,10,,11]),[4,null===(p=window.analyticsClient)||void 0===p?void 0:p.isInitialized()];case 3:if(I.sent(),o=null===(w=null===(f=null===window||void 0===window?void 0:window.NikePrivacy)||void 0===f?void 0:f.permissions.get())||void 0===w?void 0:w.map((function(e){var n=e.category;return e.isEnabled?n:null})).filter(Boolean),![P,E].every((function(e){return null==o?void 0:o.includes(e)})))return console.warn("No UGP permissions. Cannot fetch Adobe Alloy-Target locations."),null===(h=window.newrelic)||void 0===h||h.addPageAction("EXP_OPTIMIZATION_CLIENT_ALLOY_NO_UGP_PERMISSION",{errorMessage:"No UGP permissions. Cannot fetch Adobe Alloy-Target locations.",locations:t}),[2];i=null,I.label=4;case 4:return I.trys.push([4,6,,7]),[4,window.alloy("getIdentity")];case 5:return(r=I.sent())&&(i=null===(g=r.identity)||void 0===g?void 0:g.ECID),[3,7];case 6:return a=I.sent(),(null===(y=window.newrelic)||void 0===y?void 0:y.noticeError)&&(null===(b=window.newrelic)||void 0===b||b.addPageAction("EXP_OPTIMIZATION_CLIENT_ALLOY_GETIDENTITY_ERROR",{host:window.location.host,errorName:a.name,errorMessage:a.message,stackTrace:null!==(m=a.stack)&&void 0!==m?m:"",locations:t.length?t:null})),console.error("Failed to fetch ecid using Alloy getIndentity method: ".concat(a.message)),[3,7];case 7:return[4,null===(_=window.webShellClient)||void 0===_?void 0:_.identity.getIsLoggedIn()];case 8:return l=I.sent(),c=this.getSendEventObject(t,l,i),[4,window.alloy("sendEvent",c)];case 9:return u=I.sent(),null===(A=window.newrelic)||void 0===A||A.addPageAction("EXP_OPTIMIZATION_CLIENT_ALLOY_SUCCESS",{locations:t}),[2,this.transformAlloyOffer(null==u?void 0:u.decisions,n,t)];case 10:return s=I.sent(),(null===(T=window.newrelic)||void 0===T?void 0:T.noticeError)&&(null===(O=window.newrelic)||void 0===O||O.addPageAction("EXP_OPTIMIZATION_CLIENT_ALLOY_ERROR",{host:window.location.host,errorName:s.name,errorMessage:s.message,stackTrace:null!==(N=s.stack)&&void 0!==N?N:"",locations:t.length?t:null})),console.error("Failed to find locations: ".concat(s.message)),[3,11];case 11:return[2]}}))}))},o.getLocationName=function(e){var n=[];return e.map((function(e){n.push(e.name)})),n},o.getLocationParameters=function(e){var n,t,o,i={appCountry:null===(t=null===(n=window.webShellClient)||void 0===n?void 0:n.locale.get().country)||void 0===t?void 0:t.toUpperCase(),appLanguage:null===(o=window.webShellClient)||void 0===o?void 0:o.locale.get().language,browserWidth:window.innerWidth};return e.map((function(e){i=A(A({},i),e.parameters)})),i},o.transformAlloyOffer=function(e,n,t){var i=[];if(t.forEach((function(t){var r={name:t.name,analytics:void 0,content:void 0,responseTokens:void 0,experimentActivatedCallback:void 0};e.forEach((function(e){var i,a,l,c,u,s;if(t.name===e.scope&&(r.analytics=(null===(a=null===(i=e.scopeDetails)||void 0===i?void 0:i.characteristics)||void 0===a?void 0:a.analyticsToken)||void 0,r.content=(null===(c=null===(l=e.items[0])||void 0===l?void 0:l.data)||void 0===c?void 0:c.content)||void 0,r.responseTokens={"experience.name":(null===(u=e.items[0])||void 0===u?void 0:u.meta["experience.name"])||void 0,"activity.name":(null===(s=e.items[0])||void 0===s?void 0:s.meta["activity.name"])||void 0},r.experimentActivatedCallback=function(){},r.analytics)){var d=function(){var e;try{return o.sendAdobeAnalyticsEvent(r),!0}catch(n){return window.newrelic&&window.newrelic.addPageAction("EXP_OPTIMIZATION_CLIENT_ALLOY_ANALYTICS_SEND_ERROR",{host:window.location.host,errorName:n.name,errorMessage:n.message,stackTrace:null!==(e=n.stack)&&void 0!==e?e:""}),console.error("Failed to send Analytics: ".concat(n.message)),!1}finally{r.experimentActivatedCallback=function(){}}};n?r.experimentActivatedCallback=d:d()}})),i.push(r)})),i&&i.length>0)return{locations:i}},o.getSendEventObject=function(e,n,t){var i=o.getLocationName(e),r=o.getLocationParameters(e),a={};return t&&(a.customerecid=[{id:t,authenticatedState:n?"authenticated":"loggedOut"}]),{renderDecisions:!0,decisionScopes:i,xdm:{identityMap:a},data:{__adobe:{target:r}}}},null===(t=window.newrelic)||void 0===t||t.addPageAction("EXP_OPTIMIZATION_CLIENT_INITIALIZED",{}),o}return _(n,e),n.prototype.sendAdobeAnalyticsEvent=function(e){var n=u(window);window.webShellClient.analytics.track(i,A({"experience.name":e.responseTokens["experience.name"],"activity.name":e.responseTokens["activity.name"],abTest:{analytics:e.analytics}},n),{writeKey:"2iv4Qa7rFEipAs4iE850BkBpTYQvlAFZ"})},n.prototype.getAdobeAlloySdk=function(e){return T(this,void 0,void 0,(function(){return I(this,(function(n){return[2,v.runAsync((function(){return e}))]}))}))},n}(n),k=function(){function e(e){var n=this;this.generateGlobalMbox=function(){r().then((function(e){var t,o,i,r=e.loggedIn,a=e.userId,l={appCountry:null===(o=null===(t=n._window.webShellClient)||void 0===t?void 0:t.locale.get().country)||void 0===o?void 0:o.toUpperCase(),appLanguage:null===(i=n._window.webShellClient)||void 0===i?void 0:i.locale.get().language,browserWidth:n._window.innerWidth};n._window.targetPageParamsAll=function(){return l.profile={loggedIn:r,userId:a},l}})).catch((function(e){var t;console.warn({error:e,cmsg:"Global mbox param init is failed.."}),null===(t=n._window.newrelic)||void 0===t||t.addPageAction("EXP_OPTIMIZATION_CLIENT_ERROR",{errorMessage:"Global mbox param init is failed."})}))},this._window=e}return e.prototype.init=function(){this.generateGlobalMbox()},e}(),C=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},S=function(e,n){var t,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=n.call(e,r)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function L(e){return C(this,void 0,void 0,(function(){function n(){return C(this,void 0,void 0,(function(){return S(this,(function(n){return e.location.pathname.toLocaleLowerCase().includes("help")&&e.alloy?(i.optimization.getLocations=o,i.optimization.__WS_UNSTABLE__.getLocations=o):(i.optimization.getLocations=t,i.optimization.__WS_UNSTABLE__.getLocations=t),[2]}))}))}var t,o,i,r;return S(this,(function(a){switch(a.label){case 0:return t=new m([]).getLocations,o=new N([]).getAlloyLocations,new k(e).init(),i=e.webShellClient,void 0!==e&&(null===(r=e.newrelic)||void 0===r||r.addPageAction("OPTIMIZATION_CLIENT_INITIALIZED",{})),[4,n()];case 1:return a.sent(),[2]}}))}))}!function(e){C(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return e.webShellClient?[4,L(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}(window)})();