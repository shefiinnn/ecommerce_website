/*! For license information please see privacy-core.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.privacyCore=t():e.privacyCore=t()}(self,(()=>(()=>{var e={496:(e,t,r)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e);return{getItem:function(e){return new Promise((function(r,n){r(t.getItem(e))}))},setItem:function(e,r){return new Promise((function(n,o){n(t.setItem(e,r))}))},removeItem:function(e){return new Promise((function(r,n){r(t.removeItem(e))}))}}};var n,o=(n=r(821))&&n.__esModule?n:{default:n}},821:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":r(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}(t)?self[t]:o};var o={getItem:n,setItem:n,removeItem:n}},110:(e,t,r)=>{"use strict";var n;t.A=void 0;var o=(0,((n=r(496))&&n.__esModule?n:{default:n}).default)("local");t.A=o},865:(e,t,r)=>{"use strict";r.r(t);var n=r(644);const o=async()=>{var e;try{if(!(null===(e=window.webShellClient)||void 0===e?void 0:e.identity))throw new Error("web shell identity does not exist");const{getIsLoggedIn:t}=window.webShellClient.identity,r=navigator.globalPrivacyControl,o=await t(),i=(0,n.getRelicActionName)(n.RELIC_ACTION_TYPES_NAME.GPC_ENABLED),a={geolocation:(0,n.getRelicGeolocation)(),user_type:(0,n.getRelicUserType)(o),gpc:r};if(o)return void(0,n.addRelicAnalyticsPageAction)(i,{...a,registered_country:await(0,n.getRelicRegisteredCountry)(o)});(0,n.addRelicAnalyticsPageAction)(i,a)}catch(e){return}};window.addEventListener("load",o),window.addEventListener("unload",(()=>{window.removeEventListener("load",o)}))},872:(e,t,r)=>{"use strict";r.r(t),r.d(t,{enableGeolocOverride:()=>M,geolocHeader:()=>n,isMismatch:()=>U,readGeolocCookie:()=>L});var n={"set-edgescape-cookie":!0},o="geoloc",i="US",a=/^[a-zA-Z]{2}$/,s=/^\/([a-z]{2})(?:\/|$)/;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var u=r(300),E=".nike.com",l=".nikecloud.com",_="https://www",d=("https://store".concat(E),"https://secure-store".concat(E),"https://api".concat(E),"".concat(_).concat(E));function p(e,t,r){if(!t.exec(e)&&void 0!==e)throw new Error("cannot get ".concat(r,': "').concat(e,'" was found but failed validation'));return e}"".concat(_).concat(".converse.com"),"https://uxtesting.prod.commerce".concat(l),"https://experience.prod.commerce".concat(l),"https://experience.test.commerce".concat(l),"".concat(d,"/assets");var f=r(900),T=r.n(f),S=function(e){return T().get(e)},I="CONSUMERCHOICE",m="CONSUMERCHOICE_SESSION",O=/^[a-z]{2}\/[a-z]{2}_[a-z]{2}$/;function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=o,v=function(){return T().get(y)},N=function(e,t){return T().set(y,e,t)};function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R=o,h="cc",A="geolocCountry",C="country",w="geoloc cookie not set";function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:"/",domain:E},t=new URLSearchParams(window.location.search).get(A);if(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({expires:""},e);N("".concat(h,"=").concat(t),r)}}function b(e){var t=function(e){return e.split(",").reduce((function(e,t){var r,n,o=(r=t.split("="),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(r,n)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return e[i]=a,e}),{})}(e);return Object.defineProperty(t,C,{configurable:!0,get:function(){return this[h]}}),t}function L(e){if(e)return function(e){return e&&"object"!==c(e.cookies)?console.warn("No cookies object found to parse"):e.cookies[R]?b(e.cookies[R]):console.warn(w)}(e);var t=v();return t?b(t):(console.warn(w),t)}function U(e){var t,r,n,o,c=function(e){if(!e)return e;if(a.exec(e))return e.toUpperCase();throw new Error('cannot determine mismatch: "'.concat(e,'" is not a recognized marketplace code'))}(e)||(t=window.location.pathname,(r=s.exec(t))?r[1].toUpperCase():i),u=(n=S(I),o=p(S(m),/^t$/,"consumer chose"),{choice:p(n?n.toLowerCase():void 0,O,"consumer choice"),chosen:o?!!o:o}).choice,E=u&&u.slice(0,2).toUpperCase();if(E&&E!==c)return!0;var l=(L()||{}).country,_=l&&l.toUpperCase();return!(!_||_===c)}},115:function(e,t,r){var n,o,i,a,s,c,u,E,l,_,d,p,f,T,S,I;i=function(e,t,r){if(!l(t)||d(t)||p(t)||f(t)||E(t))return t;var n,o=0,a=0;if(_(t))for(n=[],a=t.length;o<a;o++)n.push(i(e,t[o],r));else for(var s in n={},t)Object.prototype.hasOwnProperty.call(t,s)&&(n[e(s,r)]=i(e,t[s],r));return n},a=function(e){return T(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)},s=function(e){var t=a(e);return t.substr(0,1).toUpperCase()+t.substr(1)},c=function(e,t){return function(e,t){var r=(t=t||{}).separator||"_",n=t.split||/(?=[A-Z])/;return e.split(n).join(r)}(e,t).toLowerCase()},u=Object.prototype.toString,E=function(e){return"function"==typeof e},l=function(e){return e===Object(e)},_=function(e){return"[object Array]"==u.call(e)},d=function(e){return"[object Date]"==u.call(e)},p=function(e){return"[object RegExp]"==u.call(e)},f=function(e){return"[object Boolean]"==u.call(e)},T=function(e){return(e-=0)==e},S=function(e,t){var r=t&&"process"in t?t.process:t;return"function"!=typeof r?e:function(t,n){return r(t,e,n)}},I={camelize:a,decamelize:c,pascalize:s,depascalize:c,camelizeKeys:function(e,t){return i(S(a,t),e)},decamelizeKeys:function(e,t){return i(S(c,t),e,t)},pascalizeKeys:function(e,t){return i(S(s,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}},void 0===(o="function"==typeof(n=I)?n.call(t,r,t,e):n)||(e.exports=o)},900:(e,t,r)=>{var n,o,i;void 0===(o="function"==typeof(n=i=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+s}}function a(e,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))})?n.call(t,r,t,e):n)||(e.exports=o),e.exports=i()},913:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}return function t(r,n){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=e({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=t+"="+r.write(o,t)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},o=0;o<t.length;o++){var i=t[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=r.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(t,r){o(t,"",e({},r,{expires:-1}))},withAttributes:function(r){return t(this.converter,e({},this.attributes,r))},withConverter:function(r){return t(e({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},330:(e,t,r)=>{"use strict";var n=r(853);Object.defineProperty(t,"__esModule",{value:!0}),t.SQ_COOKIES=t.SERVER_PURPOSE_LIMITATION_NAMES=t.SERVER_CONTEXT_FRAME_NAMES=t.RELIC_EVENT_NAME=t.RELIC_ACTION_TYPES_NAME=t.PURPOSE_LIMITATION_NAMES=t.PURPOSE_LIMITATIONS_KEY=t.PRIVACY_CORE_EVENT_NAMESPACE=t.PRIVACY_CORE_CUSTOM_EVENT_NAMES=t.NOT_REQUIRED_MODAL_CONTEXT_LEVEL=t.NOT_REQUIRED_INLINE_CONTEXT_LEVEL=t.NI_C_LOCATION_PREFIX=t.NI_C_COOKIES=t.NAMES_KEY=t.INLINE_COOKIE_EVENT_NAMESPACE=t.INLINE_COOKIE_CUSTOM_EVENT_NAMES=t.COOKIE_PURPOSE_LIMITATION_NAMES=t.COOKIE_DIALOG_BASE_CLASS_NAME=t.CONTEXT_FRAME_VERSION=t.CONTEXT_FRAME_NAMES=t.CONTEXT_FRAMES_KEY=t.CONSENT_TYPE_MEMBER=t.CONSENT_TYPE_GUEST=t.CONSENT_TYPE=t.CONSENT_SELECTION_SOURCE=void 0;var o=n(r(913));t.PURPOSE_LIMITATIONS_KEY="purposeLimitations",t.CONTEXT_FRAMES_KEY="contextFrames",t.NAMES_KEY="names",t.NOT_REQUIRED_INLINE_CONTEXT_LEVEL=1,t.NOT_REQUIRED_MODAL_CONTEXT_LEVEL=2;const i=o.default.get("ni_cf_override")||"_v2";t.CONTEXT_FRAME_VERSION=i,t.NI_C_COOKIES="ni_c",t.NI_C_LOCATION_PREFIX="cc=",t.SQ_COOKIES="sq";const a={WEB_GUEST_MODAL:`webGuestModal${i}`,WEB_MEMBER_MODAL:`webMemberModal${i}`,WEB_MEMBER_SETTINGS:`webMemberSettings${i}`,WEB_GUEST_SETTINGS:`webGuestSettings${i}`};t.CONTEXT_FRAME_NAMES=a;const s={WEB_GUEST_MODAL:`web_guest_modal${i}`,WEB_MEMBER_MODAL:`web_member_modal${i}`,WEB_MEMBER_SETTINGS:`web_member_settings${i}`,WEB_GUEST_SETTINGS:`web_guest_settings${i}`};let c,u,E,l,_,d,p,f,T,S,I;t.SERVER_CONTEXT_FRAME_NAMES=s,t.PURPOSE_LIMITATION_NAMES=c,function(e){e.PERSONALIZATION_RECOMMENDATION="personalizationRecommendation",e.TARGETING_BEHAVIORAL_EVENTS="adtargetingBehavioralevents",e.PERFORMANCE="performance",e.TARGETING_HASHEDMATCH="adtargetingHashedmatch",e.PERSONALIZATION_TARGETED_COMMS="personalizationTargetedComms"}(c||(t.PURPOSE_LIMITATION_NAMES=c={})),t.SERVER_PURPOSE_LIMITATION_NAMES=u,function(e){e.PERSONALIZATION_RECOMMENDATION="personalization_recommendation",e.TARGETING_BEHAVIORAL_EVENTS="adtargeting_behavioralevents",e.PERFORMANCE="performance",e.TARGETING_HASHEDMATCH="adtargeting_hashedmatch",e.PERSONALIZATION_TARGETED_COMMS="personalization_targeted_comms"}(u||(t.SERVER_PURPOSE_LIMITATION_NAMES=u={})),t.COOKIE_PURPOSE_LIMITATION_NAMES=E,function(e){e.TARGETING_BEHAVIORAL_EVENTS="BEAD",e.PERFORMANCE="PERF",e.TARGETING_HASHEDMATCH="1PA",e.PERSONALIZATION_TARGETED_COMMS="PERS"}(E||(t.COOKIE_PURPOSE_LIMITATION_NAMES=E={})),t.CONSENT_TYPE=l,function(e){e.ACCEPT="accept",e.DECLINE="decline",e.DEFAULT_ACCEPT="default_accept",e.DEFAULT_DECLINE="default_decline"}(l||(t.CONSENT_TYPE=l={})),t.CONSENT_TYPE_MEMBER=_,function(e){e.ACCEPT="accept",e.DECLINE="decline",e.DEFAULT_ACCEPT="default_accept",e.DEFAULT_DECLINE="default_decline"}(_||(t.CONSENT_TYPE_MEMBER=_={})),t.CONSENT_TYPE_GUEST=d,function(e){e.DEFAULT_ACCEPT="default_accept",e.DEFAULT_DECLINE="default_decline"}(d||(t.CONSENT_TYPE_GUEST=d={})),t.CONSENT_SELECTION_SOURCE=p,function(e){e.DIRECT="DIRECT",e.ADVERTISING_DATA_SHARING_GPC_SWITCH="ADVERTISING_DATA_SHARING_GPC_SWITCH",e.ADVERTISING_DATA_SHARING_CPRA_SWITCH="ADVERTISING_DATA_SHARING_CPRA_SWITCH"}(p||(t.CONSENT_SELECTION_SOURCE=p={})),t.INLINE_COOKIE_EVENT_NAMESPACE="@nikeInlineCookieCustomEvent/",t.PRIVACY_CORE_EVENT_NAMESPACE="@nikePrivacyCoreCustomEvent/",t.INLINE_COOKIE_CUSTOM_EVENT_NAMES=f,function(e){e.MFE_LOADED="mfeLoaded",e.INITIALIZE_ERROR="initializeError",e.PERMISSIONS_UPDATE_ERROR="permissionsUpdateError",e.LEARN_MORE_IS_SHOWN="learnMoreIsShown",e.LEARN_MORE_IS_HIDDEN="learnMoreIsHidden",e.SHOW_LOADER="showLoader",e.HIDE_LOADER="hideLoader",e.SHOW_INLINE_ERROR="showInlineError",e.SHOW_UPDATE_ERROR="showUpdateError"}(f||(t.INLINE_COOKIE_CUSTOM_EVENT_NAMES=f={})),t.PRIVACY_CORE_CUSTOM_EVENT_NAMES=T,function(e){e.INITIALIZED="initialized",e.INITIALIZE_ERROR="initializeError",e.CONTEXT_FRAMES_GET_ERROR="contextFramesGetError",e.PERMISSIONS_UPDATING="permissionsUpdating",e.PERMISSIONS_UPDATED="permissionsUpdated",e.PERMISSIONS_GET_ERROR="permissionsGetError",e.PERMISSIONS_UPDATE_ERROR="permissionsUpdateError"}(T||(t.PRIVACY_CORE_CUSTOM_EVENT_NAMES=T={})),t.RELIC_ACTION_TYPES_NAME=S,function(e){e.SETTINGS_PAGE_VIEWED="settingsPageViewed",e.ACCEPT_ALL_CLICKED="acceptAllClicked",e.DECLINE_ALL_CLICKED="declineAllClicked",e.CONFIRM_CHOICE_CLICKED="confirmChoiceClicked",e.GPC_ENABLED="gpcEnabled"}(S||(t.RELIC_ACTION_TYPES_NAME=S={})),t.RELIC_EVENT_NAME=I,function(e){e.PRIVACY_SETTINGS_VIEWED="PrivacySettingsViewed",e.PRIVACY_SETTINGS_ACCEPT_ALL="PrivacySettingsAcceptAll",e.PRIVACY_SETTINGS_DECLINE_ALL="PrivacySettingsDeclineAll",e.PRIVACY_SETTINGS_CONFIRM_CHOICES="PrivacySettingsConfirmChoices",e.GPC_ENABLED="gpcEnabled",e.PRIVACY_CORE_API_ERROR="privacyCoreAPIError",e.INITIALIZE_ERROR="initializeError",e.PERMISSIONS_GET_ERROR="permissionsGetError",e.CONTEXT_FRAMES_GET_ERROR="contextFramesGetError",e.PERMISSIONS_UPDATE_ERROR="permissionsUpdateError"}(I||(t.RELIC_EVENT_NAME=I={})),t.COOKIE_DIALOG_BASE_CLASS_NAME="cookie-dialog-base"},314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeAnalytics=t.getInitialAnalyticsProperties=void 0;var n=r(616),o=r(934);const i=e=>e.split(" ").map((e=>e.toLowerCase())).join("-");t.initializeAnalytics=e=>({trackClick:(t,r={})=>{(({pageType:e,eventName:t,eventOptions:r})=>{try{var n,o,a,s;const c=`https://www.nike.com/assets/measure/schemas/digital-product/dotcom/platform/web/classification/experience-event/experience/${e}/event-type/track/event-name/${i(t)}/version/LATEST/schema.json`;if(null===(n=window.webShellClient)||void 0===n||null===(o=n.analytics)||void 0===o||!o.track||null===(a=window.__shell)||void 0===a||null===(s=a.analytics)||void 0===s||!s.writeKey)return;window.webShellClient.analytics.track(t,{...r},{$schema:c,writeKey:window.__shell.analytics.writeKey})}catch(e){}})({pageType:e,eventName:t,eventOptions:r})},pageViewed:(t,r,n={})=>{(({pageType:e,eventName:t,eventOptions:r,pageName:n})=>{try{var o,a,s,c;const u=`https://www.nike.com/assets/measure/schemas/digital-product/dotcom/platform/web/classification/experience-event/experience/${e}/event-type/page/event-name/${i(t)}/version/LATEST/schema.json`;if(null===(o=window.webShellClient)||void 0===o||null===(a=o.analytics)||void 0===a||!a.page||null===(s=window.__shell)||void 0===s||null===(c=s.analytics)||void 0===c||!c.writeKey)return;window.webShellClient.analytics.page(void 0,n,{eventName:t,...r},{$schema:u,writeKey:window.__shell.analytics.writeKey})}catch(e){}})({pageName:t,pageType:e,eventName:r,eventOptions:n})}}),t.getInitialAnalyticsProperties=({pageName:e,viewPageType:t,pageDetail:r})=>{var i,a;const s={app:{backendPlatform:"cloud",version:"1.0.0",domain:null===(i=window)||void 0===i||null===(a=i.location)||void 0===a?void 0:a.hostname},locale:{country:(0,o.fetchUrlLocation)(),language:(0,n.fetchLanguage)()},view:{experienceType:"nikecom",pageName:e,pageType:t}};return r&&(s.view.pageDetail=r),s}},175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsModalVisible=void 0;var n=r(330);t.checkIsModalVisible=()=>!!document.querySelector(`.${n.COOKIE_DIALOG_BASE_CLASS_NAME}`)},906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomEvent=o,t.dispatchCustomEvent=i,t.dispatchEvent=function(e,t){i(o(e,t))},t.getPrivacyCoreEventName=t.getInlineEventName=void 0;var n=r(330);function o(e,t){return new CustomEvent(e,t)}function i(e){window.dispatchEvent(e)}t.getPrivacyCoreEventName=(e,t="")=>`${n.PRIVACY_CORE_EVENT_NAMESPACE}${t}${e}`,t.getInlineEventName=(e,t="")=>`${n.INLINE_COOKIE_EVENT_NAMESPACE}${t}${e}`},585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCloudFragment=void 0,t.fetchCloudFragment=()=>{var e,t,r;const n=null===(e=window.webShellClient)||void 0===e||null===(t=e.locale)||void 0===t||null===(r=t.get)||void 0===r?void 0:r.call(t).cloudUrlFragment;return n?`/${n}`:""}},616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchLanguage=void 0,t.fetchLanguage=()=>{var e,t,r;return(null===(e=window.webShellClient)||void 0===e||null===(t=e.locale)||void 0===t||null===(r=t.get)||void 0===r?void 0:r.call(t).hreflang)||""}},777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchLocation=void 0;var n=r(872);t.fetchLocation=()=>(null===n.readGeolocCookie||void 0===n.readGeolocCookie?void 0:(0,n.readGeolocCookie)().country)||""},934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUrlLocation=void 0,t.fetchUrlLocation=()=>{var e,t,r;return(null===(e=window.webShellClient)||void 0===e||null===(t=e.locale)||void 0===t||null===(r=t.get)||void 0===r?void 0:r.call(t).country)||""}},875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGpcEnable=void 0;const r=["US"];t.getGpcEnable=e=>{var t;return!(null===(t=navigator)||void 0===t||!t.globalPrivacyControl)&&!!e&&r.includes(e)}},508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGpcUserLocation=void 0;var n=r(777);t.getGpcUserLocation=async e=>{var t,r,o,i;if(!e)return Promise.resolve((0,n.fetchLocation)());if(null===(t=window.webShellClient)||void 0===t||null===(r=t.identity)||void 0===r||!r.getUserProfile)throw new Error("Error happened while accessing Web Shell Client - Identity");const a=await(null===(o=window.webShellClient)||void 0===o||null===(i=o.identity)||void 0===i?void 0:i.getUserProfile());return null==a?void 0:a.registeredCountry}},687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsLoggedIn=void 0,t.getIsLoggedIn=async()=>{var e,t,r,n;if(null===(e=window.webShellClient)||void 0===e||null===(t=e.identity)||void 0===t||!t.getIsLoggedIn)throw new Error("Error happened while accessing Web Shell Client - Identity");return await(null===(r=window.webShellClient)||void 0===r||null===(n=r.identity)||void 0===n?void 0:n.getIsLoggedIn())}},85:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrivacyPolicyUrl=void 0;var n=r(644);t.getPrivacyPolicyUrl=async()=>{const e=(0,n.fetchUrlLocation)(),t=(0,n.fetchLanguage)().substring(0,2);if(!t)throw new Error("Language is not available");return`https://agreementservice.svs.nike.com/rest/agreement?agreementType=privacyPolicy&${"tw"===e?"location=tw&mobileStatus=false&uxId=com.nike.commerce.checkout.web":`uxId=com.nike.commerce.nikedotcom.web&country=${e.toUpperCase()}`}&language=${t}&requestType=redirect`}},850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(585);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(777);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(934);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=r(616);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=r(687);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=r(875);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=r(906);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var E=r(314);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var l=r(801);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var _=r(508);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var d=r(189);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var p=r(175);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=r(85);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}))},801:(e,t,r)=>{"use strict";var n=r(853);Object.defineProperty(t,"__esModule",{value:!0}),t.getRelicUserType=t.getRelicRegisteredCountry=t.getRelicGeolocation=t.getRelicConsent=t.getRelicActionName=t.addRelicAnalyticsPageAction=void 0;var o=n(r(913)),i=r(330);t.addRelicAnalyticsPageAction=(e,t)=>{try{var r;if(!e)return;null!==(r=window.newrelic)&&void 0!==r&&r.addPageAction&&window.newrelic.addPageAction(e,t)}catch(e){}},t.getRelicUserType=e=>e?"member":"guest",t.getRelicConsent=()=>o.default.get(i.NI_C_COOKIES)||"",t.getRelicGeolocation=()=>o.default.get("geoloc")||"",t.getRelicRegisteredCountry=async e=>{var t,r,n,o;return e?null===(t=await(null===(r=window.webShellClient)||void 0===r||null===(n=r.identity)||void 0===n||null===(o=n.getUserProfile)||void 0===o?void 0:o.call(n)))||void 0===t?void 0:t.registeredCountry:""},t.getRelicActionName=e=>{switch(e){case i.RELIC_ACTION_TYPES_NAME.SETTINGS_PAGE_VIEWED:return i.RELIC_EVENT_NAME.PRIVACY_SETTINGS_VIEWED;case i.RELIC_ACTION_TYPES_NAME.ACCEPT_ALL_CLICKED:return i.RELIC_EVENT_NAME.PRIVACY_SETTINGS_ACCEPT_ALL;case i.RELIC_ACTION_TYPES_NAME.DECLINE_ALL_CLICKED:return i.RELIC_EVENT_NAME.PRIVACY_SETTINGS_DECLINE_ALL;case i.RELIC_ACTION_TYPES_NAME.CONFIRM_CHOICE_CLICKED:return i.RELIC_EVENT_NAME.PRIVACY_SETTINGS_CONFIRM_CHOICES;case i.RELIC_ACTION_TYPES_NAME.GPC_ENABLED:return i.RELIC_EVENT_NAME.GPC_ENABLED;default:return}}},189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wait=void 0,t.wait=e=>new Promise((t=>setTimeout(t,e)))},644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(850);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},853:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},300:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>n})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n);var e=r(644),t=r(900),o=r.n(t),i=r(115);function a(e,t){return e===t}var s=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,a=n.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}(n),c=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=a,u.dependencies=s,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=null,n=null;return function(){return function(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));const c=s((e=>e.purposeLimitations),(e=>e.member||{userId:null,purposeLimitations:[],purposeLimitationsToken:{tokenBody:"",expires:0},purposeLimitationsLevels:{},loading:!1,error:null})),u=s((e=>e.purposeLimitations),(e=>e.guest||{userId:null,purposeLimitations:[],purposeLimitationsLevels:{},loading:!1,error:null})),E="privacyCookieModalSeen";var l;!function(e){e.PURPOSE_LIMITATIONS="persist:purposeLimitations",e.CONTEXT_FRAMES="persist:contextFrames",e.ROOT="persist:nike-privacy"}(l||(l={}));const _=["US"],d=["AT","BE","BG","HR","CZ","DK","FI","GR","HU","IE","LU","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IL","ZA","TR","US","IT","DE","FR"],p=new Date((new Date).getTime()+864e5),f=".nike.com",T=["privacy","do-not-share-my-data"];var S;!function(e){e.INFO="color:white;background-color:orange;padding:5px",e.ERROR="color:white;background-color:red;padding:5px"}(S||(S={}));const I=async({request:t,isLoggedIn:r,memberLocation:n})=>{const o={url:t.url,status:null,body:null};try{const e=await fetch(t);if(e.status>=400)throw o.body=await e.text(),o.status=e.status,new Error(`status: ${e.status} message: ${e.statusText}`);return e}catch(t){const{status:i,url:a,body:s}=o;return(0,e.addRelicAnalyticsPageAction)(e.RELIC_EVENT_NAME.PRIVACY_CORE_API_ERROR,{user_type:(0,e.getRelicUserType)(r),consent:"",geolocation:(0,e.getRelicGeolocation)(),error_message:`${t}`,api_url:a,...i&&{status_code:`${i}`},...s&&{response_body:s},...n&&{registered_country:n}}),Promise.reject(t)}},m=async({language:e,userExperience:t,eTag:r,isLoggedIn:n,memberLocation:o})=>{const i=new URL(`https://api.nike.com/privacy_compliance/context_frames/v2/experience/${t}/language/${e}`),a=new Request(i.toString(),{headers:{...r&&{"If-None-Match":r}}});return I({request:a,isLoggedIn:n,memberLocation:o})};var O=r(300);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,O.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var N="function"==typeof Symbol&&Symbol.observable||"@@observable",P=function(){return Math.random().toString(36).substring(7).split("").join(".")},R={INIT:"@@redux/INIT"+P(),REPLACE:"@@redux/REPLACE"+P(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+P()}};function h(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(v(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(v(1));return r(h)(e,t)}if("function"!=typeof e)throw new Error(v(2));var o=e,i=t,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function E(){if(c)throw new Error(v(3));return i}function l(e){if("function"!=typeof e)throw new Error(v(4));if(c)throw new Error(v(5));var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error(v(6));t=!1,u();var r=s.indexOf(e);s.splice(r,1),a=null}}}function _(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(v(7));if(void 0===e.type)throw new Error(v(8));if(c)throw new Error(v(9));try{c=!0,i=o(i,e)}finally{c=!1}for(var t=a=s,r=0;r<t.length;r++)(0,t[r])();return e}return _({type:R.INIT}),(n={dispatch:_,subscribe:l,getState:E,replaceReducer:function(e){if("function"!=typeof e)throw new Error(v(10));o=e,_({type:R.REPLACE})}})[N]=function(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(v(11));function r(){e.next&&e.next(E())}return r(),{unsubscribe:t(r)}}})[N]=function(){return this},e},n}var A=h;function C(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var w="persist:",M="persist/FLUSH",b="persist/REHYDRATE",L="persist/PAUSE",U="persist/PERSIST",G="persist/PURGE",x="persist/REGISTER";function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t,r,n){n.debug;var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return e&&"object"===D(e)&&Object.keys(e).forEach((function(n){"_persist"!==n&&t[n]===r[n]&&(o[n]=e[n])})),o}function V(e){return JSON.stringify(e)}function B(e){var t,r=e.transforms||[],n="".concat(void 0!==e.keyPrefix?e.keyPrefix:w).concat(e.key),o=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:z,o.getItem(n).then((function(e){if(e)try{var n={},o=t(e);return Object.keys(o).forEach((function(e){n[e]=r.reduceRight((function(t,r){return r.out(t,e,o)}),t(o[e]))})),n}catch(e){throw e}}))}function z(e){return JSON.parse(e)}function K(e){}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(r,!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){var r=void 0!==e.version?e.version:-1,n=(e.debug,void 0===e.stateReconciler?F:e.stateReconciler),o=e.getStoredState||B,i=void 0!==e.timeout?e.timeout:5e3,a=null,s=!1,c=!0,u=function(e){return e._persist.rehydrated&&a&&!c&&a.update(e),e};return function(E,l){var _=E||{},d=_._persist,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(_,["_persist"]);if(l.type===U){var f=!1,T=function(t,r){f||(l.rehydrate(e.key,t,r),f=!0)};if(i&&setTimeout((function(){!f&&T(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),i),c=!1,a||(a=function(e){var t,r=e.blacklist||null,n=e.whitelist||null,o=e.transforms||[],i=e.throttle||0,a="".concat(void 0!==e.keyPrefix?e.keyPrefix:w).concat(e.key),s=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:V;var c=e.writeFailHandler||null,u={},E={},l=[],_=null,d=null;function p(){if(0===l.length)return _&&clearInterval(_),void(_=null);var e=l.shift(),r=o.reduce((function(t,r){return r.in(t,e,u)}),u[e]);if(void 0!==r)try{E[e]=t(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete E[e];0===l.length&&(Object.keys(E).forEach((function(e){void 0===u[e]&&delete E[e]})),d=s.setItem(a,t(E)).catch(T))}function f(e){return!(n&&-1===n.indexOf(e)&&"_persist"!==e||r&&-1!==r.indexOf(e))}function T(e){c&&c(e)}return{update:function(e){Object.keys(e).forEach((function(t){f(t)&&u[t]!==e[t]&&-1===l.indexOf(t)&&l.push(t)})),Object.keys(u).forEach((function(t){void 0===e[t]&&f(t)&&-1===l.indexOf(t)&&void 0!==u[t]&&l.push(t)})),null===_&&(_=setInterval(p,i)),u=e},flush:function(){for(;0!==l.length;)p();return d||Promise.resolve()}}}(e)),d)return Y({},t(p,l),{_persist:d});if("function"!=typeof l.rehydrate||"function"!=typeof l.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return l.register(e.key),o(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,r).then((function(e){T(e)}),(function(e){T(void 0,e)}))}),(function(e){T(void 0,e)})),Y({},t(p,l),{_persist:{version:r,rehydrated:!1}})}if(l.type===G)return s=!0,l.result(function(e){var t=e.storage,r="".concat(void 0!==e.keyPrefix?e.keyPrefix:w).concat(e.key);return t.removeItem(r,K)}(e)),Y({},t(p,l),{_persist:d});if(l.type===M)return l.result(a&&a.flush()),Y({},t(p,l),{_persist:d});if(l.type===L)c=!0;else if(l.type===b){if(s)return Y({},p,{_persist:Y({},d,{rehydrated:!0})});if(l.key===e.key){var S=t(p,l),I=l.payload,m=Y({},!1!==n&&void 0!==I?n(I,E,S,e):S,{_persist:Y({},d,{rehydrated:!0})});return u(m)}}if(!d)return t(E,l);var O=t(p,l);return O===p?E:u(Y({},O,{_persist:d}))}}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(r,!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q={registry:[],bootstrapped:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Z({},e,{registry:[].concat(W(e.registry),[t.key])});case b:var r=e.registry.indexOf(t.key),n=W(e.registry);return n.splice(r,1),Z({},e,{registry:n,bootstrapped:0===n.length});default:return e}};function te(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}var re=te();re.withExtraArgument=te;const ne=re;function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}var ae="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0!==t.length)return"object"===ie(t[0])?C:C.apply(void 0,function(e){if(Array.isArray(e))return oe(e)}(n=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var n},se=("undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,r(110));const ce={key:"nike-privacy",storage:se.A,blacklist:[e.PURPOSE_LIMITATIONS_KEY,e.CONTEXT_FRAMES_KEY]},ue={key:e.PURPOSE_LIMITATIONS_KEY,storage:se.A,blacklist:["error"]},Ee={key:e.CONTEXT_FRAMES_KEY,storage:se.A,blacklist:["error"]};var le,_e;!function(e){e.GET_CONTEXT_FRAMES_MEMBER_PENDING="@privacy-core/GET_CONTEXT_FRAMES_MEMBER_PENDING",e.GET_CONTEXT_FRAMES_MEMBER_SUCCESS="@privacy-core/GET_CONTEXT_FRAMES_MEMBER_SUCCESS",e.GET_CONTEXT_FRAMES_MEMBER_FAIL="@privacy-core/GET_CONTEXT_FRAMES_MEMBER_FAIL"}(le||(le={})),function(e){e.GET_CONTEXT_FRAMES_GUEST_PENDING="@privacy-core/GET_CONTEXT_FRAMES_GUEST_PENDING",e.GET_CONTEXT_FRAMES_GUEST_SUCCESS="@privacy-core/GET_CONTEXT_FRAMES_GUEST_SUCCESS",e.GET_CONTEXT_FRAMES_GUEST_FAIL="@privacy-core/GET_CONTEXT_FRAMES_GUEST_FAIL"}(_e||(_e={}));const de={...le,..._e,RESET_CONTEXT_FRAMES_MEMBER:"@privacy-core/RESET_CONTEXT_FRAMES_MEMBER"};var pe,fe,Te,Se,Ie;!function(e){e.GET_PURPOSE_LIMITATIONS_MEMBER_PENDING="@privacy-core/GET_PURPOSE_LIMITATIONS_MEMBER_PENDING",e.GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS="@privacy-core/GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS",e.GET_PURPOSE_LIMITATIONS_MEMBER_FAIL="@privacy-core/GET_PURPOSE_LIMITATIONS_MEMBER_FAIL"}(pe||(pe={})),function(e){e.GET_PURPOSE_LIMITATIONS_GUEST_PENDING="@privacy-core/GET_PURPOSE_LIMITATIONS_GUEST_PENDING",e.GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS="@privacy-core/GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS",e.GET_PURPOSE_LIMITATIONS_GUEST_FAIL="@privacy-core/GET_PURPOSE_LIMITATIONS_GUEST"}(fe||(fe={})),function(e){e.UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING",e.UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS",e.UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL"}(Te||(Te={})),function(e){e.UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING",e.UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS",e.UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL"}(Se||(Se={})),function(e){e.RESET_PURPOSE_LIMITATIONS_MEMBER="@privacy-core/RESET_PURPOSE_LIMITATIONS_MEMBER",e.RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER="@privacy-core/RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER",e.RESET_ERROR_PURPOSE_LIMITATIONS_GUEST="@privacy-core/RESET_ERROR_PURPOSE_LIMITATIONS_GUEST"}(Ie||(Ie={}));const me={...pe,...fe,...Te,...Se,...Ie},Oe={guest:{userId:null,purposeLimitations:[],purposeLimitationsLevels:{},loading:!1,error:null,lastUpdatedTimestamp:null},member:{userId:null,purposeLimitations:[],purposeLimitationsToken:{tokenBody:"",expires:0},purposeLimitationsLevels:{},loading:!1,error:null,lastUpdatedTimestamp:null}},ge={guest:{contextFrames:[],language:"",eTag:"",lastModified:"",loading:!1,error:null},member:{contextFrames:[],language:"",eTag:"",lastModified:"",loading:!1,error:null}},ye=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var i,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:R.INIT}))throw new Error(v(12));if(void 0===r(void 0,{type:R.PROBE_UNKNOWN_ACTION()}))throw new Error(v(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,o={},s=0;s<a.length;s++){var c=a[s],u=r[c],E=e[c],l=u(E,t);if(void 0===l)throw t&&t.type,new Error(v(14));o[c]=l,n=n||l!==E}return(n=n||a.length!==Object.keys(e).length)?o:e}}({[e.PURPOSE_LIMITATIONS_KEY]:H(ue,((e=Oe,t)=>{switch(t.type){case me.GET_PURPOSE_LIMITATIONS_MEMBER_PENDING:return{...e,member:{...e.member,loading:!0}};case me.GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS:return{...e,member:{...e.member,loading:!1,error:null,...t.payload}};case me.GET_PURPOSE_LIMITATIONS_MEMBER_FAIL:return{...Oe,member:{...Oe.member,error:t.payload}};case me.GET_PURPOSE_LIMITATIONS_GUEST_PENDING:return{...e,guest:{...e.guest,loading:!0}};case me.GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS:return{...e,guest:{...e.guest,loading:!1,error:null,...t.payload}};case me.GET_PURPOSE_LIMITATIONS_GUEST_FAIL:return{...Oe,guest:{...Oe.guest,error:t.payload}};case me.UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING:return{...e,member:{...e.member,loading:!0}};case me.UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS:return{...e,member:{...e.member,loading:!1,error:null,...t.payload}};case me.UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL:return{...e,member:{...e.member,error:t.payload}};case me.UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING:return{...e,guest:{...e.guest,loading:!0}};case me.UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS:return{...e,guest:{...e.guest,loading:!1,error:null,...t.payload}};case me.UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL:return{...e,guest:{...e.guest,error:t.payload}};case me.RESET_PURPOSE_LIMITATIONS_MEMBER:return{...e,member:{...Oe.member}};case me.RESET_ERROR_PURPOSE_LIMITATIONS_GUEST:return{...e,guest:{...e.guest,error:null}};case me.RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER:return{...e,member:{...e.member,error:null}};default:return e}})),[e.CONTEXT_FRAMES_KEY]:H(Ee,((e=ge,t)=>{switch(t.type){case de.GET_CONTEXT_FRAMES_MEMBER_PENDING:return{...e,member:{...e.member,loading:!0}};case de.GET_CONTEXT_FRAMES_GUEST_PENDING:return{...e,guest:{...e.guest,loading:!0}};case de.GET_CONTEXT_FRAMES_MEMBER_SUCCESS:return{...e,member:{...e.member,loading:!1,error:null,...t.payload}};case de.GET_CONTEXT_FRAMES_GUEST_SUCCESS:return{...e,guest:{...e.guest,loading:!1,error:null,...t.payload}};case de.GET_CONTEXT_FRAMES_MEMBER_FAIL:return{...e,member:{...ge.member,error:t.payload}};case de.GET_CONTEXT_FRAMES_GUEST_FAIL:return{...ge,guest:{...ge.guest,error:t.payload}};case de.RESET_CONTEXT_FRAMES_MEMBER:return{...e,member:{...ge.member}};default:return e}}))}),ve=A(H(ce,ye),ae(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(v(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return n=C.apply(void 0,i)(r.dispatch),y(y({},r),{},{dispatch:n})}}}(ne))),Ne=(function(e,t,r){var n=!1,o=h(ee,Q,void 0),i=function(e){o.dispatch({type:x,key:e})},a=function(t,r,i){var a={type:b,payload:r,err:i,key:t};e.dispatch(a),o.dispatch(a),n&&s.getState().bootstrapped&&(n(),n=!1)},s=Z({},o,{purge:function(){var t=[];return e.dispatch({type:G,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:M,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:L})},persist:function(){e.dispatch({type:U,register:i,rehydrate:a})}});s.persist()}(ve),(e,t)=>e.find((({category:e})=>e===t))),Pe=e=>e.reduce(((e,t)=>({...e,[t.category]:t.level})),{}),Re=t=>{const r=Ne(t,e.SERVER_PURPOSE_LIMITATION_NAMES.PERSONALIZATION_TARGETED_COMMS),n=Ne(t,e.SERVER_PURPOSE_LIMITATION_NAMES.TARGETING_BEHAVIORAL_EVENTS),o=Ne(t,e.SERVER_PURPOSE_LIMITATION_NAMES.PERFORMANCE),i=!!(null==n?void 0:n.isEnabled),a=((e,t)=>!(e||!(null==t?void 0:t.isEnabled))||!(!(null==e?void 0:e.isEnabled)||!(null==t?void 0:t.isEnabled)))(r,o);let s;return i||a||(s=0),!i&&a&&(s=1),i&&!a&&(s=2),i&&a&&(s=3),s},he=t=>{o().remove(e.SQ_COOKIES,{path:"/",domain:"www.nike.com"});const r=Re(t);void 0!==r&&o().set("sq",`${r}`,{expires:p,path:"/",domain:f})},Ae=t=>{const r=JSON.parse(JSON.stringify(t)),n=r.consent;delete r.consent;const o=(t=>{const r={isEnabled:!1,isDefault:!1};switch(t){case e.CONSENT_TYPE.ACCEPT:r.isEnabled=!0,r.isDefault=!1;break;case e.CONSENT_TYPE.DECLINE:r.isEnabled=!1,r.isDefault=!1;break;case e.CONSENT_TYPE.DEFAULT_ACCEPT:r.isEnabled=!0,r.isDefault=!0;break;case e.CONSENT_TYPE.DEFAULT_DECLINE:r.isEnabled=!1,r.isDefault=!0}return r})(n);return r.isEnabled=o.isEnabled,r.isDefault=o.isDefault,r},Ce=e=>e.map((e=>(e=>{const t=JSON.parse(JSON.stringify(e)),r=Ae(t);return{...r,userLicenses:r.userLicenses.map((e=>Ae(e)))}})((e=>{const t=JSON.parse(JSON.stringify(e));return delete t.level,{...t,userLicenses:t.userLicenses.map((e=>{const t={...e};return delete t.level,t}))}})(e)))),we=async({contextFrameToUpdate:t,accessToken:r,language:n,userExperience:o,memberLocation:a})=>{if(!r||!t.contextFrameId||!t.contextFrameVersionId)throw new Error("Incorrect Context Frames data provided to update Purpose limitations");const{contextFrameId:s,...c}=t,u=((t,r)=>{const n=(()=>{const e=window.location.pathname.split("/");return e.find(((t,r)=>T.includes(e[r-1])))})();return(0,i.decamelizeKeys)({...t,...n&&{originApplication:n},language:r,selectionTimestamp:(new Date).toISOString(),consentSelections:t.consentSelections.map((t=>({...t,consent:!0===t.consent?e.CONSENT_TYPE.ACCEPT:e.CONSENT_TYPE.DECLINE})))})})(c,n),E=await(async({accessToken:e,userExperience:t,contextFrameToUpdateBody:r,contextFrameId:n,memberLocation:o})=>{const i=new Headers({Authorization:`Bearer ${e}`}),a=new URL(`https://api.nike.com/privacy_compliance/consent/v2/context_frame/${n}`);a.search=new URLSearchParams({experience:t}).toString();const s=new Request(a.toString(),{body:JSON.stringify(r),headers:i,method:"PUT"});return I({request:s,isLoggedIn:Boolean(e),memberLocation:o})})({accessToken:r,contextFrameToUpdateBody:u,contextFrameId:s,userExperience:o,memberLocation:a});if(200!==E.status)throw new Error(`${E.status} ${E.statusText}`);const l=await E.json();return(0,i.camelizeKeys)(l)},Me=()=>{const{purposeLimitations:e,error:t}=c(ve.getState());return!(t||!e||!e.length)},be=()=>{const{purposeLimitations:e,error:t}=u(ve.getState());return!(t||!e||!e.length)},Le=e=>!0===e.isEnabled?"1":"0",Ue=t=>e.COOKIE_PURPOSE_LIMITATION_NAMES[t],Ge=t=>{const r=Object.keys(e.SERVER_PURPOSE_LIMITATION_NAMES),n=Object.values(e.SERVER_PURPOSE_LIMITATION_NAMES).indexOf(t.category);return n>=0?r[n]:void 0},xe=e=>e.map((e=>{const t=Ge(e);if(void 0===t)return;const r=Ue(t);return void 0!==r?`${r}=${Le(e)}`:void 0})).sort().filter((e=>void 0!==e)).join("|"),De=t=>{o().remove(e.NI_C_COOKIES,{path:"/",domain:"www.nike.com"});const r=xe(t);o().set(e.NI_C_COOKIES,r,{expires:395,path:"/",domain:f})},ke=s((e=>e.contextFrames),(e=>e.member||{contextFrames:[],language:"",eTag:"",lastModified:"",loading:!1,error:null})),je=s((e=>e.contextFrames),(e=>e.guest||{contextFrames:[],language:"",eTag:"",lastModified:"",loading:!1,error:null})),Fe=({contextFrames:e,purposeLimitationsLevels:t})=>e.map((e=>{const r=((e,t)=>{const r=e.reduce(((e,r)=>{const n=t[r.purposeLimitationCategory];if(void 0===n)throw new Error(`Level for "${r.purposeLimitationCategory}" category was not found`);return e.push(n),e}),[]);return Math.max(...r)})(e.contexts,t);var n,o;return{...e,metadata:{...e.metadata,...(n=e.metadata.alwaysOnDisclosure,o=r,n?{alwaysOnDisclosure:{...n,level:o}}:{})},contexts:e.contexts.map((e=>({...e,level:t[e.purposeLimitationCategory]})))}})),Ve=({contextFrame:t,memberPurposeLimitations:r,guestPurposeLimitations:n})=>{if("true"===window.localStorage.getItem(E))return!1;const o=t.contexts.some((t=>{if(t.level<=e.NOT_REQUIRED_MODAL_CONTEXT_LEVEL)return!1;const o=r.find((({category:e})=>e===t.purposeLimitationCategory)),i=n.find((({category:e})=>e===t.purposeLimitationCategory));return!!i&&!!o&&!i.isDefault&&o.isEnabled!==i.isEnabled}));return o||window.localStorage.setItem(E,"true"),o},Be=({contextFrames:e,memberPurposeLimitations:t,guestPurposeLimitations:r})=>r.length?e.map((e=>({...e,isGuestAndMemberSelectionMismatched:Ve({contextFrame:e,memberPurposeLimitations:t,guestPurposeLimitations:r})}))):e,ze=({language:e,userExperience:t,memberLocation:r})=>async(n,o)=>{try{n({type:de.GET_CONTEXT_FRAMES_MEMBER_PENDING});const a=await(async({language:e,userExperience:t,memberLocation:r})=>{const{contextFrames:n,language:o,eTag:a,lastModified:s}=ke(ve.getState()),c=await m({language:e,userExperience:t,eTag:a,isLoggedIn:!0,memberLocation:r});if(304===c.status){if((null==n?void 0:n.length)&&o)return{contextFrames:n,language:o,eTag:a,lastModified:s};throw new Error("Something went wrong with local storage")}if(200!==c.status)throw new Error(`${c.status} ${c.statusText}`);const u=c.headers.get("ETag")||void 0,E=c.headers.get("Last-Modified")||void 0,l=await c.json();return{...(0,i.camelizeKeys)(l),eTag:u,lastModified:E}})({language:e,userExperience:t,memberLocation:r}),{purposeLimitations:s,purposeLimitationsLevels:E}=c(o()),l=u(o()).purposeLimitations,_=Fe({contextFrames:a.contextFrames,purposeLimitationsLevels:E});return n({type:de.GET_CONTEXT_FRAMES_MEMBER_SUCCESS,payload:{contextFrames:Be({contextFrames:_,memberPurposeLimitations:s,guestPurposeLimitations:l}),language:a.language,eTag:a.eTag,lastModified:a.lastModified}})}catch(e){return n({type:de.GET_CONTEXT_FRAMES_MEMBER_FAIL,payload:e.message})}},Ke=({language:e,userExperience:t})=>async(r,n)=>{try{r({type:de.GET_CONTEXT_FRAMES_GUEST_PENDING});const o=await(async({language:e,userExperience:t})=>{const{contextFrames:r,language:n,eTag:o,lastModified:a}=je(ve.getState()),s=await m({language:e,userExperience:t,eTag:o,isLoggedIn:!1,memberLocation:void 0});if(304===s.status){if((null==r?void 0:r.length)&&n)return{contextFrames:r,language:n,eTag:o,lastModified:a};throw new Error("Something went wrong with local storage")}if(200!==s.status)throw new Error(`${s.status} ${s.statusText}`);const c=s.headers.get("ETag")||void 0,u=s.headers.get("Last-Modified")||void 0,E=await s.json();return{...(0,i.camelizeKeys)(E),eTag:c,lastModified:u}})({language:e,userExperience:t}),{purposeLimitationsLevels:a}=u(n()),s=Fe({contextFrames:o.contextFrames,purposeLimitationsLevels:a});return r({type:de.GET_CONTEXT_FRAMES_GUEST_SUCCESS,payload:{contextFrames:s,language:o.language,eTag:o.eTag,lastModified:o.lastModified}})}catch(e){return r({type:de.GET_CONTEXT_FRAMES_GUEST_FAIL,payload:e.message})}},Xe=(e,t)=>e.map((e=>{const r=Ge(e);if(!r)return e;const n=Ue(r);if(!n)return e;const o=t.split("|").reduce(((e,t)=>{const r=t.split("=");return{...e,[r[0]]:r[1]}}),{}),i=n in o,a=Le(e),s="1"===o[n];return i&&o[n]!==a?{...e,isEnabled:s,userLicenses:e.userLicenses.map((e=>({...e,isDefault:!1,isEnabled:s})))}:e})),Ye=t=>{const r=o().get(e.NI_C_COOKIES);return!r||r!==xe(t)},$e=t=>{const r=o().get(e.SQ_COOKIES);return!r||r!==`${Re(t)}`},He=async({accessToken:e,userId:t,userExperience:r,memberLocation:n,noCache:o})=>{const{purposeLimitations:a,...s}=await(async({accessToken:e,userExperience:t,memberLocation:r,noCache:n})=>{const o=await(async({accessToken:e,userExperience:t,memberLocation:r,noCache:n})=>{const o=new Headers({Authorization:`Bearer ${e}`,...n?{"Cache-Control":"no-cache"}:{}}),i=new URL("https://api.nike.com/privacy_compliance/purpose_limitations/v1");i.search=new URLSearchParams({experience:t}).toString();const a=new Request(i.toString(),{headers:o});return I({request:a,isLoggedIn:!0,memberLocation:r})})({accessToken:e,userExperience:t,memberLocation:r,noCache:n});if(200!==o.status)throw new Error(`${o.status} ${o.statusText}`);const a=await o.json();return(0,i.camelizeKeys)(a)})({accessToken:e,userExperience:r,memberLocation:n,noCache:o}),c={userId:t,purposeLimitations:Ce(a),purposeLimitationsLevels:Pe(a),lastUpdatedTimestamp:Date.now(),...s};return Ye(c.purposeLimitations)&&De(c.purposeLimitations),$e(c.purposeLimitations)&&he(c.purposeLimitations),c},We=async({userId:t,userExperience:r,guestLocation:n,storedPurposeLimitationsGuestState:a})=>{const s=o().get(e.NI_C_COOKIES),{purposeLimitations:c,...u}=await(async(e,t)=>{if(!t)throw new Error("Location is required to get Purpose Limitations");const r=await(async({userExperience:e,guestLocation:t})=>{const r=new URL(`https://api.nike.com/privacy_compliance/purpose_limitation_defaults/v1/experience/${e}/location/${t}`);return I({request:new Request(r.toString()),isLoggedIn:!1,memberLocation:void 0})})({userExperience:e,guestLocation:t});if(200!==r.status)throw new Error(`${r.status} ${r.statusText}`);const n=await r.json();return(0,i.camelizeKeys)(n)})(r,n);let E={userId:t,purposeLimitations:Ce(c),purposeLimitationsLevels:Pe(c),lastUpdatedTimestamp:Date.now(),...u};const l=be(),_=((t,r)=>Object.values(e.SERVER_PURPOSE_LIMITATION_NAMES).some((e=>{if(!e)return!1;const n=r.purposeLimitationsLevels[e],o=t.purposeLimitationsLevels[e];return!(!n||!o)&&o>=3&&o>n})))(E,a),d=a.userId===t;return l&&!_&&d?E=((e,t)=>{const r=((e,t)=>t.map((t=>{const r=e.find((e=>e.category===t.category&&!e.isDefault));return r?{...t,isDefault:!1,isEnabled:r.isEnabled,userLicenses:t.userLicenses.map((e=>({...e,isDefault:!1,isEnabled:r.isEnabled})))}:t})))(t.purposeLimitations,e.purposeLimitations);return Ye(r)&&De(r),$e(r)&&he(r),{...e,purposeLimitations:r,lastUpdatedTimestamp:t.lastUpdatedTimestamp}})(E,a):(De(E.purposeLimitations),he(E.purposeLimitations)),s&&(()=>{const e=window.location.hostname,t=(i=e.includes("www."),o().get("nikePrivacySubDomainLink")||(i?"www.nike.com":"nike.com")),r=e.split("."),n=t.split(".");var i;return!(r.length<=n.length)&&e.endsWith(`.${t.replace("www.","")}`)})()&&(E=((e,t)=>({...e,purposeLimitations:Xe(e.purposeLimitations,t)}))(E,s)),E},qe=e=>async t=>{try{t({type:me.UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING});const{userId:r,purposeLimitationsLevels:n}=u(ve.getState()),o=(e=>{if(!e.contextFrameId||!e.contextFrameVersionId)throw new Error("Incorrect Context Frames data provided to update Purpose limitations");const{consentSelections:t}=e,{purposeLimitations:r}=u(ve.getState());return((e,t)=>e.map((e=>{if(void 0===t[e.category])return e;const r=JSON.parse(JSON.stringify(e)),{isEnabled:n,isDefault:o}=t[e.category];return r.isEnabled=n,r.isDefault=o,r.userLicenses.forEach((e=>{e.isEnabled=n,e.isDefault=o})),r})))(r,(e=>e.reduce(((e,t)=>{return{...e,[t.purposeLimitationCategory]:(r=t.consent,r?{isEnabled:!0,isDefault:!1}:{isEnabled:!1,isDefault:!1})};var r}),{}))(t))})(e);return De(o),he(o),t({type:me.UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS,payload:{purposeLimitations:o,purposeLimitationsLevels:n,userId:r,lastUpdatedTimestamp:Date.now()}})}catch(e){return t({type:me.UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL,payload:e.message})}};class Ze{constructor(t){this.getLanguage=e=>{switch(e){case"no-NO":return"nb-NO";case"zh-Hant-TW":return"zh-TW";case"es-LA":return"es-MX";default:return e}},this.getGuestId=async e=>{const t=await e.getVisitData();if(t)return t.visitor||t.visitorId},this.getMemberId=async e=>{var t;return null===(t=await e.getUserProfile())||void 0===t?void 0:t.upmId},this.getUserId=async(e,t)=>{const r=e?await this.getMemberId(t):await this.getGuestId(t);if(void 0===r)throw new Error("Get user id error");return r},this.checkIsEnabled=()=>{var e,t,r,n;const i=o().get("privacyCoreEnabled"),a=o().get("privacyCoreEnabledCountries"),s=o().get("privacyCoreDisabledCountries"),c=(null===(n=null===(r=null===(t=null===(e=window.webShellClient)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.get)||void 0===r?void 0:r.call(t).country)||void 0===n?void 0:n.toUpperCase())||"",u=a&&a.split(","),E=s&&s.split(",");return!!c&&(i?"true"===i:!(!u||!u.includes(c))||(!E||!E.includes(c))&&d.includes(c))},this.checkIsCPRAEnabled=()=>{var e,t,r,n;const i=o().get("cpraEnabled");if(i)return"true"===i;const a=(null===(n=null===(r=null===(t=null===(e=window.webShellClient)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.get)||void 0===r?void 0:r.call(t).country)||void 0===n?void 0:n.toUpperCase())||"";return _.includes(a)},this.clearBrowserDataRelatedToPrivacy=()=>{o().remove(e.SQ_COOKIES,{path:"/",domain:"www.nike.com"}),o().remove(e.SQ_COOKIES,{path:"/",domain:f}),o().remove(e.NI_C_COOKIES,{path:"/",domain:"www.nike.com"}),o().remove(e.NI_C_COOKIES,{path:"/",domain:f}),[l.PURPOSE_LIMITATIONS,l.CONTEXT_FRAMES,l.ROOT,E].forEach((e=>window.localStorage.removeItem(e)))},this.updateMemberGpcValues=async({accessToken:t,language:r,userExperience:n,memberLocation:o,userId:i})=>{const a=this.store.getState(),s=ke(a).contextFrames.find((t=>t.metadata.contextFrameName===e.SERVER_CONTEXT_FRAME_NAMES.WEB_MEMBER_SETTINGS));if(!s)throw new Error("Can not find context frame");const u=s.contexts.filter((t=>t.purposeLimitationCategory===e.SERVER_PURPOSE_LIMITATION_NAMES.TARGETING_BEHAVIORAL_EVENTS||t.purposeLimitationCategory===e.SERVER_PURPOSE_LIMITATION_NAMES.TARGETING_HASHEDMATCH));if(!u.length)return Promise.resolve();const{purposeLimitations:E}=c(a),l={contextFrameId:s.metadata.contextFrameId,contextFrameVersionId:s.metadata.contextFrameVersionId,contextFrameConfirmLabelShown:!!s.metadata.contextFrameConfirmLabel,consentSelectionSource:e.CONSENT_SELECTION_SOURCE.ADVERTISING_DATA_SHARING_GPC_SWITCH,consentSelections:u.reduce(((e,t)=>{const r=E.find((e=>e.category===t.purposeLimitationCategory));if(!r)throw new Error("Corresponded PL does not exist");return r.isDefault||r.isEnabled?[...e,{purposeLimitationCategory:t.purposeLimitationCategory,consent:!1,level:t.level,consentSelectionControlType:t.consentSelectionControlMapping.multiPermission[t.level]}]:e}),[])};if(l.consentSelections.length<=0)return Promise.resolve();if(await this.setInteractionMember({accessToken:t,language:r,userExperience:n,memberLocation:o,contextFrameToUpdate:l,uniqueEventsPrefix:"_updatingMemberGpc",userId:i}),c(a).error)throw new Error("Initialize GPC error");return Promise.resolve()},this.updateGuestGpcValues=async()=>{const t=this.store.getState(),r=je(t).contextFrames.find((t=>t.metadata.contextFrameName===e.SERVER_CONTEXT_FRAME_NAMES.WEB_GUEST_SETTINGS));if(!r)throw new Error("Can not find context frame");const n=r.contexts.find((t=>t.purposeLimitationCategory===e.SERVER_PURPOSE_LIMITATION_NAMES.TARGETING_BEHAVIORAL_EVENTS));if(!n)return Promise.resolve();const o=u(t).purposeLimitations.find((t=>t.category===e.SERVER_PURPOSE_LIMITATION_NAMES.TARGETING_BEHAVIORAL_EVENTS));if(!o)throw new Error("Corresponded PL does not exist");if(!o.isDefault&&!o.isEnabled)return Promise.resolve();const i={contextFrameId:r.metadata.contextFrameId,contextFrameVersionId:r.metadata.contextFrameVersionId,contextFrameConfirmLabelShown:!!r.metadata.contextFrameConfirmLabel,consentSelectionSource:e.CONSENT_SELECTION_SOURCE.ADVERTISING_DATA_SHARING_GPC_SWITCH,consentSelections:[{purposeLimitationCategory:n.purposeLimitationCategory,consent:!1,level:n.level,consentSelectionControlType:n.consentSelectionControlMapping.multiPermission[n.level]}]};if(await this.setInteractionGuest(i,"_updatingGuestGpc"),u(t).error)throw new Error("Initialize GPC error");return Promise.resolve()},this.initializeMember=async({accessToken:t,userId:r,language:n,userExperience:o,memberLocation:i})=>{await this.store.dispatch((({accessToken:e,userId:t,userExperience:r,memberLocation:n})=>async o=>{try{o({type:me.GET_PURPOSE_LIMITATIONS_MEMBER_PENDING});const i=await He({accessToken:e,userId:t,userExperience:r,memberLocation:n,noCache:!1});return o({type:me.GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS,payload:i})}catch(e){return o({type:me.GET_PURPOSE_LIMITATIONS_MEMBER_FAIL,payload:e.message})}})({accessToken:t,userId:r,userExperience:o,memberLocation:i})),await this.store.dispatch(ze({language:n,userExperience:o,memberLocation:i}));const a=this.store.getState(),{error:s}=c(a),{error:u}=ke(a);if(s||u)throw new Error("Initialize member error");(0,e.getGpcEnable)(i)&&await this.updateMemberGpcValues({accessToken:t,language:n,userExperience:o,memberLocation:i,userId:r})},this.initializeGuest=async({userId:t,language:r,userExperience:n,guestLocation:o})=>{await this.store.dispatch((({userId:e,userExperience:t,guestLocation:r})=>async(n,o)=>{try{n({type:me.GET_PURPOSE_LIMITATIONS_GUEST_PENDING});const i=u(o()),a=await We({userId:e,userExperience:t,guestLocation:r,storedPurposeLimitationsGuestState:i});return n({type:me.GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS,payload:a})}catch(e){return n({type:me.GET_PURPOSE_LIMITATIONS_GUEST_FAIL,payload:e.message})}})({userId:t,userExperience:n,guestLocation:o})),await this.store.dispatch(Ke({language:r,userExperience:n}));const i=this.store.getState(),a=u(i).error,s=je(i).error,c=!!Object.keys(i.purposeLimitations.member).length,l=!!Object.keys(i.contextFrames.member).length;if(c&&this.store.dispatch({type:me.RESET_PURPOSE_LIMITATIONS_MEMBER}),l&&this.store.dispatch({type:de.RESET_CONTEXT_FRAMES_MEMBER}),window.localStorage.removeItem(E),a||s)throw new Error("Initialize guest error");(0,e.getGpcEnable)(o)&&await this.updateGuestGpcValues()},this.initialize=async({accessToken:e,userId:t,language:r,userExperience:n,memberLocation:o,guestLocation:i})=>e?await this.initializeMember({accessToken:e,userId:t,language:r,userExperience:n,memberLocation:o}):await this.initializeGuest({userId:t,language:r,userExperience:n,guestLocation:i}),this.getPermissionMember=e=>{if(!Me())throw new Error("Can not retrieve permissions");const{purposeLimitations:t}=c(this.store.getState());return Ne(t,e)},this.getPermissionGuest=e=>{if(!be())throw new Error("Can not retrieve permissions");const{purposeLimitations:t}=u(this.store.getState());return Ne(t,e)},this.getPermissionsAllMember=()=>{if(!Me())throw new Error("Can not retrieve permissions");const{purposeLimitations:e}=c(this.store.getState());return e},this.getPermissionsAllGuest=()=>{if(!be())throw new Error("Can not retrieve permissions");const{purposeLimitations:e}=u(this.store.getState());return e},this.getStoredGuestPermission=e=>{if(!be())return;const{purposeLimitations:t}=u(this.store.getState());return Ne(t,e)},this.getPermission=({name:e,accessToken:t})=>t?this.getPermissionMember(e):this.getPermissionGuest(e),this.getPermissionsAll=e=>e?this.getPermissionsAllMember():this.getPermissionsAllGuest(),this.getInteractionGuest=()=>{const e=be(),{contextFrames:t,error:r}=je(this.store.getState());if(!e||r)throw new Error("Get interaction error");return t},this.getInteractionMember=()=>{const e=Me(),{contextFrames:t,error:r}=ke(this.store.getState());if(!e||r)throw new Error("Get interaction error");return t},this.getInteraction=({name:e,accessToken:t})=>{const r=t?this.getInteractionMember():this.getInteractionGuest();if(r)return((e,t)=>e.find((({metadata:e})=>e.contextFrameName===t)))(r,e)},this.setInteractionGuest=async(t,r)=>{(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.PERMISSIONS_UPDATING,r)),await this.store.dispatch(qe(t));const{error:n}=u(this.store.getState());if(n)throw this.store.dispatch({type:me.RESET_ERROR_PURPOSE_LIMITATIONS_GUEST}),new Error("Set interaction error")},this.setInteractionMember=async({accessToken:t,language:r,userExperience:n,contextFrameToUpdate:o,uniqueEventsPrefix:i,memberLocation:a,userId:s})=>{var u;(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.PERMISSIONS_UPDATING,i)),await this.store.dispatch((u={accessToken:t,language:r,userExperience:n,contextFrameToUpdate:o,memberLocation:a,userId:s},async e=>{try{e({type:me.UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING}),await we(u);const t=await He({accessToken:u.accessToken,userId:u.userId,userExperience:u.userExperience,memberLocation:u.memberLocation,noCache:!0});return e({type:me.UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS,payload:t})}catch(t){return e({type:me.UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL,payload:t.message})}}));const{error:l}=c(this.store.getState());if(l)throw this.store.dispatch({type:me.RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER}),new Error("Set interaction error");window.localStorage.setItem(E,"true")},this.setInteraction=async({accessToken:e,language:t,userExperience:r,memberLocation:n,userId:o,contextFrameToUpdate:i,uniqueEventsPrefix:a})=>e?await this.setInteractionMember({accessToken:e,language:t,userExperience:r,contextFrameToUpdate:i,uniqueEventsPrefix:a,memberLocation:n,userId:o}):await this.setInteractionGuest(i,a),this.store=t}}var Je,Qe,et,tt,rt,nt,ot,it,at,st,ct,ut=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},Et=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class lt{constructor(t){Je.set(this,void 0),Qe.set(this,void 0),et.set(this,void 0),tt.set(this,void 0),rt.set(this,void 0),nt.set(this,void 0),ot.set(this,void 0),it.set(this,void 0),at.set(this,"0.110.0"),st.set(this,{resolve:void 0,reject:void 0,initializationError:void 0}),ct.set(this,new Promise(((e,t)=>{Et(this,st,"f").resolve=e,Et(this,st,"f").reject=t})).catch((e=>(Et(this,st,"f").initializationError=e,Promise.resolve(!1))))),this.__clearBrowserStorage__=()=>{Et(this,rt,"f").clearBrowserDataRelatedToPrivacy(),console.log("%c  Result:  ",S.INFO,"All browser storage related to privacy-core is cleared")},this.initialize=async({webShellIdentity:t,country:r,language:n})=>{var o,i,a,s,c;try{if(void 0===Et(this,ot,"f")&&this.isEnabled,void 0===Et(this,it,"f")&&this.isCPRAEnabled,!Et(this,ot,"f"))throw new Error("NikePrivacy is not allowed to use");if(void 0===lt._userExperience)throw new Error("user experience is not defined in .env file");if(!t)throw new Error("web shell identity does not exist");if(lt._initializedInstance)return await lt._initializedInstance;ut(this,Qe,r,"f"),ut(this,et,Et(this,rt,"f").getLanguage(n),"f"),ut(this,Je,await t.getAccessToken(),"f"),ut(this,nt,Et(this,Je,"f")?null===(o=await t.getUserProfile())||void 0===o?void 0:o.registeredCountry:"","f"),ut(this,tt,await Et(this,rt,"f").getUserId(Et(this,Je,"f"),t),"f");const e=Et(this,rt,"f").initialize({accessToken:Et(this,Je,"f"),userId:Et(this,tt,"f"),language:Et(this,et,"f"),userExperience:lt._userExperience,guestLocation:Et(this,Qe,"f"),memberLocation:Et(this,nt,"f")});lt._initializedInstance=e;const s=await e;return null===(a=(i=Et(this,st,"f")).resolve)||void 0===a||a.call(i,!0),s}catch(t){return(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.INITIALIZE_ERROR)),null===(c=(s=Et(this,st,"f")).reject)||void 0===c||c.call(s,t),Promise.resolve(void 0)}finally{(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.INITIALIZED))}},this.permissions={name:e.PURPOSE_LIMITATION_NAMES,get:(t,r)=>{try{if(void 0===lt._initializedInstance)throw new Error("NikePrivacy is not initialized");if(void 0===t){const e=Et(this,rt,"f").getPermissionsAll(Et(this,Je,"f"));if(!e)throw new Error("Can not get all permissions");return e}const r=Object.keys(e.PURPOSE_LIMITATION_NAMES).reduce(((t,r)=>(t[e.PURPOSE_LIMITATION_NAMES[r]]=()=>Et(this,rt,"f").getPermission({name:e.SERVER_PURPOSE_LIMITATION_NAMES[r],accessToken:Et(this,Je,"f")}),t)),{});if(!(t in r))throw new Error("Can not get permission");return r[t]()}catch(t){return void(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.PERMISSIONS_GET_ERROR,null!=r?r:""))}},_getStoredGuestPermission:t=>{try{if(void 0===lt._initializedInstance)throw new Error("NikePrivacy is not initialized");const r=Object.keys(e.PURPOSE_LIMITATION_NAMES).reduce(((t,r)=>(t[e.PURPOSE_LIMITATION_NAMES[r]]=()=>Et(this,rt,"f").getStoredGuestPermission(e.SERVER_PURPOSE_LIMITATION_NAMES[r]),t)),{});if(!(t in r))throw new Error("Can not get permission");return r[t]()}catch(e){return}}},this.interactions={get:(t,r="")=>{try{if(void 0===lt._initializedInstance)throw new Error("NikePrivacy is not initialized");const r=Object.keys(e.CONTEXT_FRAME_NAMES).reduce(((t,r)=>(t[e.CONTEXT_FRAME_NAMES[r]]=()=>Et(this,rt,"f").getInteraction({name:e.SERVER_CONTEXT_FRAME_NAMES[r],accessToken:Et(this,Je,"f")}),t)),{});if(!r[t])throw new Error("Can not get interaction");return r[t]()}catch(t){return void(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.CONTEXT_FRAMES_GET_ERROR,r))}},set:async(t,r="")=>{try{if(void 0===lt._initializedInstance)throw new Error("NikePrivacy is not initialized");const n=await Et(this,rt,"f").setInteraction({accessToken:Et(this,Je,"f"),language:Et(this,et,"f"),memberLocation:Et(this,nt,"f"),userId:Et(this,tt,"f"),contextFrameToUpdate:t,userExperience:lt._userExperience,uniqueEventsPrefix:r});return(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.PERMISSIONS_UPDATED,r)),n}catch(t){return(0,e.dispatchEvent)((0,e.getPrivacyCoreEventName)(e.PRIVACY_CORE_CUSTOM_EVENT_NAMES.PERMISSIONS_UPDATE_ERROR,r)),Promise.resolve(void 0)}}},ut(this,rt,new Ze(t),"f")}get __VERSION__(){return Et(this,at,"f")||""}get isEnabled(){try{return ut(this,ot,Et(this,rt,"f").checkIsEnabled(),"f"),Et(this,ot,"f")}catch(e){return!1}}get isCPRAEnabled(){try{return ut(this,it,Et(this,rt,"f").checkIsCPRAEnabled(),"f"),Et(this,it,"f")}catch(e){return!1}}get isModalVisible(){return(0,e.checkIsModalVisible)()}isInitialized(){return Et(this,st,"f").initializationError?Promise.reject(Et(this,st,"f").initializationError):Et(this,ct,"f")}}Je=new WeakMap,Qe=new WeakMap,et=new WeakMap,tt=new WeakMap,rt=new WeakMap,nt=new WeakMap,ot=new WeakMap,it=new WeakMap,at=new WeakMap,st=new WeakMap,ct=new WeakMap,lt._userExperience="nikedotcom",r(865),window.NikePrivacy=new lt(ve)})(),n})()));
//# sourceMappingURL=privacy-core.js.map